
<!DOCTYPE html>
<html lang="pt">
  <head>
  <link rel="stylesheet" href="/pwa/pwa.css">

  <style id="pwa-critical">
    /* Critical: hide app in browser before CSS/JS load */
    html.pwa-locked body { overflow:hidden !important; }
    html.pwa-locked body > *:not(.pwa-overlay) { opacity:0 !important; pointer-events:none !important; }
  
    html, body { background:#0D1117; }
    /* Show early gate screen immediately */
    #pwa-early-overlay { 
      position: fixed; inset: 0; display: none; place-items: center; 
      background: rgba(2,6,23,.86); color:#E5E7EB; z-index: 2147483600; 
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
    }
    html.pwa-locked #pwa-early-overlay { display: grid; }
    #pwa-early-overlay .card {
      width: min(680px, 94vw); background:#111827; border-radius:16px; padding:18px; text-align:center; 
      box-shadow: 0 30px 80px rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.06);
    }
    #pwa-early-overlay h1 { font-size:22px; margin:6px 0 6px; }
    #pwa-early-overlay p { opacity:.9; margin:6px 0; }
</style>

  <script id="pwa-early-gate">
    (function(){
      function isStandalone(){
        try{ if (navigator.standalone) return true; }catch(e){}
        try{ return matchMedia('(display-mode: standalone)').matches; }catch(e){}
        return false;
      }
      if(!isStandalone()){
        document.documentElement.classList.add('pwa-locked');
      } else {
        document.documentElement.classList.remove('pwa-locked');
      }
    })();
  </script>
<script src="/pwa/lockdown.js"></script>
  <script src="/pwa/lockdown.js"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UndoinG - Mensagens Temporárias</title>
    <meta name="description" content="App de mensagens que se apagam da memória" />
    <meta name="author" content="UndoinG Team" />

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#3b82f6" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="UndoinG" />
    
    <!-- PWA Links -->
    
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/icon-192x192.png" />

    <meta property="og:title" content="UndoinG - Mensagens Temporárias" />
    <meta property="og:description" content="App de mensagens que se apagam da memória" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/icon-512x512.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="UndoinG" />
    <meta name="twitter:description" content="App de mensagens que se apagam da memória" />
    <meta name="twitter:image" content="/icon-512x512.png" />
    <link rel="manifest" href="/manifest.webmanifest">
</head>

  <body>
  <div id="pwa-early-overlay" aria-hidden="true">
    <div class="card">
      <h1>Undoing</h1>
      <p>Preparando a tela segura…</p>
    </div>
  </div>

    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- PWA Service Worker -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then((registration) => {
              console.log('SW registered: ', registration);
            })
            .catch((registrationError) => {
              console.log('SW registration failed: ', registrationError);
            });
        });
      }
    </script>
    
  <script defer src="/pwa/pwa.js"></script>
</body>
</html>
